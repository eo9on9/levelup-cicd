# GitHub Actions 워크플로우 이름
# PR 화면 / Actions 탭에서 표시됨
name: CI - Lint

# 워크플로우가 실행되는 트리거 조건
on:
  # Pull Request 이벤트 기준으로 실행
  pull_request:
    # main 브랜치로 들어가는 PR만 대상으로 함
    # (모든 PR에서 돌리고 싶으면 branches 조건 제거)
    branches:
      - main

# 실행할 작업(job) 정의
jobs:
  # job의 식별자 (자유롭게 이름 지정 가능)
  lint:
    # 이 job을 실행할 GitHub 제공 러너(OS)
    # 프론트엔드 CI의 기본값
    runs-on: ubuntu-latest

    # job 안에서 순차적으로 실행될 step 목록
    steps:
      # GitHub 저장소의 코드를 러너로 체크아웃
      # 이 단계가 없으면 코드 자체가 없음
      - name: Checkout repository
        uses: actions/checkout@v4

      # Node.js 실행 환경 설정
      # node-version은 로컬/CI 간 버전 일관성을 위해 고정
      - name: Setup Node.js
        uses: actions/setup-node@v4
        with:
          node-version: 22.21.0

      # pnpm 설치
      # corepack은 Node 16+ 에 기본 포함
      - name: Enable pnpm
        run: corepack enable pnpm

      # 의존성 설치
      # CI 환경에서는 항상 npm ci 사용 (lockfile 기준, 재현성 보장)
      - name: Install dependencies
        run: pnpm install --frozen-lockfile

      # ESLint 실행
      # 로컬에서 사용하는 npm script를 그대로 재사용
      # 린트 에러 발생 시 PR 체크 실패
      - name: Run ESLint
        run: pnpm run lint
